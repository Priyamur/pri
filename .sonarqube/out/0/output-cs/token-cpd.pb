ñ
&D:\Pdotnet\EFConsole\LibraryContext.cs
	namespace 	
	EFConsole
 
{ 
public 
class	 
LibraryContext 
: 
	DbContext  )
{ 
public 

DbSet 
< 
Book 
> 
Book 
{ 
get !
;! "
set# &
;& '
}( )
public

 

DbSet

 
<

 
	Publisher

 
>

 
	Publisher

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
	protected 
override 
void 
OnConfiguring )
() *#
DbContextOptionsBuilder* A
optionsBuilderB P
)P Q
{ 
optionsBuilder 
. 
UseMySQL 
( 
$str c
)c d
;d e
} 
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
modelBuilder9 E
)E F
{ 
base 

.
 
OnModelCreating 
( 
modelBuilder '
)' (
;( )
modelBuilder 
. 
Entity 
< 
	Publisher #
># $
($ %
entity% +
=>, .
{ 
entity 
. 
HasKey 
( 
e 
=> 
e 
. 
ID 
)  
;  !
entity 
. 
Property 
( 
e 
=> 
e 
. 
Name #
)# $
.$ %

IsRequired% /
(/ 0
)0 1
;1 2
} 
) 
; 	
modelBuilder 
. 
Entity 
< 
Book 
> 
(  
entity  &
=>' )
{ 
entity 
. 
HasKey 
( 
e 
=> 
e 
. 
ISBN !
)! "
;" #
entity 
. 
Property 
( 
e 
=> 
e 
. 
Title $
)$ %
.% &

IsRequired& 0
(0 1
)1 2
;2 3
entity 
. 
HasOne 
( 
d 
=> 
d 
. 
	Publisher &
)& '
.  
 
WithMany   
(   
p   
=>   
p   
.   
Books    
)    !
;  ! "
}!! 
)!! 
;!! 	
}"" 
}## 
}&& ™
$D:\Pdotnet\EFConsole\LibraryModel.cs
	namespace 	
	EFConsole
 
{ 
public 
class	 
Book 
{ 
public 

string 
? 
iSBN 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
? 
title 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
? 
author 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
? 
language 
{ 
get !
;! "
set# &
;& '
}( )
public		 

int		 
pages		 
{		 
get		 
;		 
set		 
;		  
}		! "
public

 

virtual

 
	Publisher

 
	Publisher

 &
{

' (
get

) ,
;

, -
set

. 1
;

1 2
}

3 4
} 
public 
class	 
	Publisher 
{ 
public 

int 
ID 
{ 
get 
; 
set 
; 
} 
public 

string 
? 
Name 
{ 
get 
; 
set "
;" #
}$ %
public 

virtual 
ICollection 
< 
Book #
># $
Books% *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} áÉ
D:\Pdotnet\EFConsole\Program.cs
	namespace 	
mysqlefcore
 
{		 
class

 
Program

 
{ 
static 

void 
Main 
( 
string 
[ 
] 
args "
)" #
{ 
while 
( 
true 
) 
{ 
Console 
. 
	WriteLine 
( 
$str 5
)5 6
;6 7
Console 
. 
	WriteLine 
( 
$str 6
)6 7
;7 8
Console 
. 
Write 
( 
$str F
)F G
;G H
Console 
. 
Write 
( 
$str +
)+ ,
;, -
string 
? 
choice 
= 
Console  
.  !
ReadLine! )
() *
)* +
;+ ,
switch 
( 
choice 
) 
{ 	
case
 
$str 
: 

InsertData 
( 
) 
; 
break 
; 
case
 
$str 
: 
	PrintData 
( 
) 
; 
break 
; 
case
 
$str 
: 

UpdateData 
( 
) 
; 
break 
; 
case  
 
$str   
:   

RemoveData!! 
(!! 
)!! 
;!! 
break"" 
;"" 
case##
 
$str## 
:## 
Environment$$ 
.$$ 
Exit$$ 
($$ 
$num$$ 
)$$ 
;$$  
break%% 
;%% 
default&&
 
:&& 
Console'' 
.'' 
	WriteLine'' 
('' 
$str'' A
)''A B
;''B C
break(( 
;(( 
})) 	
}** 
}++ 
private-- 
static-- 
void-- 

InsertData-- "
(--" #
)--# $
{.. 
using// 
(// 
var// 
context// 
=// 
new// 
LibraryContext// -
(//- .
)//. /
)/// 0
{00 
context22 
.22 
Database22 
.22 
EnsureCreated22 &
(22& '
)22' (
;22( )
Console33 
.33 
	WriteLine33 
(33 
$str33 1
)331 2
;332 3
var55 
	publisher55 
=55 
new55 
	Publisher55 %
{66 	
Name88
 
=88 
Console88 
.88 
ReadLine88 !
(88! "
)88" #
}99 	
;99	 

context:: 
.:: 
	Publisher:: 
.:: 
Add:: 
(:: 
	publisher:: '
)::' (
;::( )
Console<< 
.<< 
	WriteLine<< 
(<< 
$str<< -
)<<- .
;<<. /
string== 
?== 
bid== 
=== 
Console== 
.== 
ReadLine== &
(==& '
)==' (
;==( )
Console>> 
.>> 
	WriteLine>> 
(>> 
$str>> 3
)>>3 4
;>>4 5
string?? 
??? 
bname?? 
=?? 
Console?? 
.??  
ReadLine??  (
(??( )
)??) *
;??* +
Console@@ 
.@@ 
	WriteLine@@ 
(@@ 
$str@@ 4
)@@4 5
;@@5 6
stringAA 
?AA 

AuthornameAA 
=AA 
ConsoleAA $
.AA$ %
ReadLineAA% -
(AA- .
)AA. /
;AA/ 0
ConsoleBB 
.BB 
	WriteLineBB 
(BB 
$strBB 6
)BB6 7
;BB7 8
stringCC 
?CC 
LangCC 
=CC 
ConsoleCC 
.CC 
ReadLineCC '
(CC' (
)CC( )
;CC) *
ConsoleDD 
.DD 
	WriteLineDD 
(DD 
$strDD 7
)DD7 8
;DD8 9
intEE 
pnoEE 
=EE 
ConvertEE 
.EE 
ToInt32EE !
(EE! "
ConsoleEE" )
.EE) *
ReadLineEE* 2
(EE2 3
)EE3 4
)EE4 5
;EE5 6
contextFF 
.FF 
BookFF 
.FF 
AddFF 
(FF 
newFF 
BookFF !
{GG 	
ISBNHH
 
=HH 
bidHH 
,HH 
TitleII
 
=II 
bnameII 
,II 
AuthorJJ
 
=JJ 

AuthornameJJ 
,JJ 
LanguageKK
 
=KK 
LangKK 
,KK 
PagesLL
 
=LL 
pnoLL 
,LL 
	PublisherMM
 
=MM 
	publisherMM 
}NN 	
)NN	 

;NN
 
contextPP 
.PP 
SaveChangesPP 
(PP 
)PP 
;PP 
}QQ 
}RR 
privateSS 
staticSS 
voidSS 
	PrintDataSS !
(SS! "
)SS" #
{TT 
usingUU 
(UU 
varUU 
contextUU 
=UU 
newUU 
LibraryContextUU -
(UU- .
)UU. /
)UU/ 0
{VV 
varWW 
booksWW 
=WW 
contextWW 
.WW 
BookWW  
.XX
 
IncludeXX 
(XX 
pXX 
=>XX 
pXX 
.XX 
	PublisherXX #
)XX# $
;XX$ %
foreachYY 
(YY 
varYY 
bookYY 
inYY 
booksYY "
)YY" #
{ZZ 	
var[[
 
data[[ 
=[[ 
new[[ 
StringBuilder[[ &
([[& '
)[[' (
;[[( )
data\\
 
.\\ 

AppendLine\\ 
(\\ 
$"\\ 
$str\\ "
{\\" #
book\\# '
.\\' (
ISBN\\( ,
}\\, -
"\\- .
)\\. /
;\\/ 0
data]]
 
.]] 

AppendLine]] 
(]] 
$"]] 
$str]] #
{]]# $
book]]$ (
.]]( )
Title]]) .
}]]. /
"]]/ 0
)]]0 1
;]]1 2
data^^
 
.^^ 

AppendLine^^ 
(^^ 
$"^^ 
$str^^ '
{^^' (
book^^( ,
.^^, -
	Publisher^^- 6
.^^6 7
Name^^7 ;
}^^; <
"^^< =
)^^= >
;^^> ?
data__
 
.__ 

AppendLine__ 
(__ 
$"__ 
$str__ &
{__& '
book__' +
.__+ ,
Language__, 4
}__4 5
"__5 6
)__6 7
;__7 8
data``
 
.`` 

AppendLine`` 
(`` 
$"`` 
$str`` #
{``# $
book``$ (
.``( )
Pages``) .
}``. /
"``/ 0
)``0 1
;``1 2
Consoleaa
 
.aa 
	WriteLineaa 
(aa 
dataaa  
.aa  !
ToStringaa! )
(aa) *
)aa* +
)aa+ ,
;aa, -
}bb 	
}cc 
}dd 
privateee 
staticee 
voidee 

UpdateDataee "
(ee" #
)ee# $
{ff 
usinggg 
(gg 
vargg 
contextgg 
=gg 
newgg 
LibraryContextgg -
(gg- .
)gg. /
)gg/ 0
{hh 
Consoleii 
.ii 
	WriteLineii 
(ii 
$strii *
)ii* +
;ii+ ,
	PrintDatajj 
(jj 
)jj 
;jj 
Consolekk 
.kk 
Writekk 
(kk 
$strkk :
)kk: ;
;kk; <
stringll 
?ll 
isbnToUpdatell 
=ll 
Consolell &
.ll& '
ReadLinell' /
(ll/ 0
)ll0 1
;ll1 2
varmm 
bookToUpdatemm 
=mm 
contextmm "
.mm" #
Bookmm# '
.mm' (
FirstOrDefaultmm( 6
(mm6 7
bmm7 8
=>mm9 ;
bmm< =
.mm= >
ISBNmm> B
==mmC E
isbnToUpdatemmF R
)mmR S
;mmS T
ifnn 

(nn 
bookToUpdatenn 
!=nn 
nullnn  
)nn  !
{oo 	
Consolepp
 
.pp 
	WriteLinepp 
(pp 
$strpp @
)pp@ A
;ppA B
Consoleqq
 
.qq 
	WriteLineqq 
(qq 
$strqq 5
)qq5 6
;qq6 7
Consolerr
 
.rr 
	WriteLinerr 
(rr 
$strrr E
)rrE F
;rrF G
stringss
 
?ss 
updatechoicess 
=ss  
Consoless! (
.ss( )
ReadLiness) 1
(ss1 2
)ss2 3
;ss3 4
stringtt
 
?tt 

updatedatatt 
=tt 
nulltt #
;tt# $
switchuu
 
(uu 
updatechoiceuu 
)uu 
{vv
 
caseww 
$strww 
:ww 

updatedataxx 
=xx 
$strxx "
;xx" #
Consoleyy 
.yy 
	WriteLineyy 
(yy  
$"yy  "
$stryy" 1
{yy1 2
bookToUpdateyy2 >
.yy> ?
Titleyy? D
}yyD E
"yyE F
)yyF G
;yyG H
Consolezz 
.zz 
Writezz 
(zz 
$strzz /
)zz/ 0
;zz0 1
string{{ 
?{{ 
newTitle{{ 
={{  
Console{{! (
.{{( )
ReadLine{{) 1
({{1 2
){{2 3
;{{3 4
bookToUpdate|| 
.|| 
Title||  
=||! "
newTitle||# +
;||+ ,
break}} 
;}} 
case~~ 
$str~~ 
:~~ 

updatedata 
= 
$str #
;# $
Console
ÅÅ 
.
ÅÅ 
	WriteLine
ÅÅ 
(
ÅÅ  
$"
ÅÅ  "
$str
ÅÅ" 2
{
ÅÅ2 3
bookToUpdate
ÅÅ3 ?
.
ÅÅ? @
Author
ÅÅ@ F
}
ÅÅF G
"
ÅÅG H
)
ÅÅH I
;
ÅÅI J
Console
ÇÇ 
.
ÇÇ 
Write
ÇÇ 
(
ÇÇ 
$str
ÇÇ 0
)
ÇÇ0 1
;
ÇÇ1 2
string
ÉÉ 
?
ÉÉ 
	newAuthor
ÉÉ 
=
ÉÉ  !
Console
ÉÉ" )
.
ÉÉ) *
ReadLine
ÉÉ* 2
(
ÉÉ2 3
)
ÉÉ3 4
;
ÉÉ4 5
bookToUpdate
ÑÑ 
.
ÑÑ 
Author
ÑÑ !
=
ÑÑ" #
	newAuthor
ÑÑ$ -
;
ÑÑ- .
break
ÖÖ 
;
ÖÖ 
case
ÜÜ 
$str
ÜÜ 
:
ÜÜ 

updatedata
áá 
=
áá 
$str
áá %
;
áá% &
Console
àà 
.
àà 
	WriteLine
àà 
(
àà  
$"
àà  "
$str
àà" 4
{
àà4 5
bookToUpdate
àà5 A
.
ààA B
Language
ààB J
}
ààJ K
"
ààK L
)
ààL M
;
ààM N
Console
ââ 
.
ââ 
Write
ââ 
(
ââ 
$str
ââ 2
)
ââ2 3
;
ââ3 4
string
ää 
?
ää 
newLanguage
ää !
=
ää" #
Console
ää$ +
.
ää+ ,
ReadLine
ää, 4
(
ää4 5
)
ää5 6
;
ää6 7
bookToUpdate
ãã 
.
ãã 
Language
ãã #
=
ãã$ %
newLanguage
ãã& 1
;
ãã1 2
break
åå 
;
åå 
case
çç 
$str
çç 
:
çç 
Console
éé 
.
éé 
	WriteLine
éé 
(
éé  
$"
éé  "
$str
éé" 1
{
éé1 2
bookToUpdate
éé2 >
.
éé> ?
Pages
éé? D
}
ééD E
"
ééE F
)
ééF G
;
ééG H
Console
èè 
.
èè 
Write
èè 
(
èè 
$str
èè /
)
èè/ 0
;
èè0 1
int
êê 
newPages
êê 
;
êê 
while
ëë 
(
ëë 
!
ëë 
int
ëë 
.
ëë 
TryParse
ëë "
(
ëë" #
Console
ëë# *
.
ëë* +
ReadLine
ëë+ 3
(
ëë3 4
)
ëë4 5
,
ëë5 6
out
ëë7 :
newPages
ëë; C
)
ëëC D
)
ëëD E
{
íí 
Console
ìì 
.
ìì 
	WriteLine
ìì !
(
ìì! "
$str
ìì" Z
)
ììZ [
;
ìì[ \
Console
îî 
.
îî 
Write
îî 
(
îî 
$str
îî 7
)
îî7 8
;
îî8 9
}
ïï 
bookToUpdate
ññ 
.
ññ 
Pages
ññ  
=
ññ! "
newPages
ññ# +
;
ññ+ ,
break
óó 
;
óó 
}
ôô
 
context
öö
 
.
öö 
SaveChanges
öö 
(
öö 
)
öö 
;
öö  
}
õõ 	
else
ùù 
{
ûû 	
Console
üü
 
.
üü 
	WriteLine
üü 
(
üü 
$"
üü 
$str
üü -
{
üü- .
isbnToUpdate
üü. :
}
üü: ;
$str
üü; F
"
üüF G
)
üüG H
;
üüH I
}
†† 	
}
°° 
}
¢¢ 
private
§§ 
static
§§ 
void
§§ 

RemoveData
§§ "
(
§§" #
)
§§# $
{
•• 
using
¶¶ 
(
¶¶ 
var
¶¶ 
context
¶¶ 
=
¶¶ 
new
¶¶ 
LibraryContext
¶¶ -
(
¶¶- .
)
¶¶. /
)
¶¶/ 0
{
ßß 
Console
©© 
.
©© 
	WriteLine
©© 
(
©© 
$str
©© *
)
©©* +
;
©©+ ,
	PrintData
™™ 
(
™™ 
)
™™ 
;
™™ 
Console
≠≠ 
.
≠≠ 
Write
≠≠ 
(
≠≠ 
$str
≠≠ :
)
≠≠: ;
;
≠≠; <
string
ÆÆ 
?
ÆÆ 
isbnToRemove
ÆÆ 
=
ÆÆ 
Console
ÆÆ &
.
ÆÆ& '
ReadLine
ÆÆ' /
(
ÆÆ/ 0
)
ÆÆ0 1
;
ÆÆ1 2
var
±± 
bookToRemove
±± 
=
±± 
context
±± "
.
±±" #
Book
±±# '
.
±±' (
FirstOrDefault
±±( 6
(
±±6 7
b
±±7 8
=>
±±9 ;
b
±±< =
.
±±= >
ISBN
±±> B
==
±±C E
isbnToRemove
±±F R
)
±±R S
;
±±S T
if
≥≥ 

(
≥≥ 
bookToRemove
≥≥ 
!=
≥≥ 
null
≥≥  
)
≥≥  !
{
¥¥ 	
Console
∂∂
 
.
∂∂ 
	WriteLine
∂∂ 
(
∂∂ 
$"
∂∂ 
$str
∂∂ 4
{
∂∂4 5
bookToRemove
∂∂5 A
.
∂∂A B
ISBN
∂∂B F
}
∂∂F G
$str
∂∂G P
{
∂∂P Q
bookToRemove
∂∂Q ]
.
∂∂] ^
Title
∂∂^ c
}
∂∂c d
"
∂∂d e
)
∂∂e f
;
∂∂f g
context
ππ
 
.
ππ 
Book
ππ 
.
ππ 
Remove
ππ 
(
ππ 
bookToRemove
ππ *
)
ππ* +
;
ππ+ ,
context
ºº
 
.
ºº 
SaveChanges
ºº 
(
ºº 
)
ºº 
;
ºº  
Console
ææ
 
.
ææ 
	WriteLine
ææ 
(
ææ 
$str
ææ 1
)
ææ1 2
;
ææ2 3
}
øø 	
else
¿¿ 
{
¡¡ 	
Console
¬¬
 
.
¬¬ 
	WriteLine
¬¬ 
(
¬¬ 
$"
¬¬ 
$str
¬¬ -
{
¬¬- .
isbnToRemove
¬¬. :
}
¬¬: ;
$str
¬¬; F
"
¬¬F G
)
¬¬G H
;
¬¬H I
}
√√ 	
}
ƒƒ 
}
≈≈ 
}
∆∆ 
}«« 